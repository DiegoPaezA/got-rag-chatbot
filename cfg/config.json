{
  "llm_settings": {
    "model_name": "gemini-2.5-flash",
    "temperature": 0.0,
    "max_retries": 3
  },
  "embedding_settings": {
    "provider": "google", 
    "model_name": "models/text-embedding-004",
    "device": "cpu",
    "chunk_size": 1000, 
    "chunk_overlap": 200,
    "separators": ["\n\n", "\n", ". ", " ", ""] 
  },
  "graph_settings": {
    "allowed_types": [
      "Character", "House", "Organization", "Battle",
      "Location", "Object", "Creature", "Religion",
      "Episode", "Lore"
    ]
  },
  "prompts": {
    "validator_system": "You are an expert Data Architect for a 'Game of Thrones' Knowledge Graph.\nYour task is to clean and validate a database of entities.\n\nYou will be given a LIST of entities in JSON format. For each entity, you must:\n- Decide the CORRECT type according to the ontology.\n- Copy the 'id' field EXACTLY as given.\n- Provide a confidence level and a short rationale.\n\nAllowed ontology (use EXACTLY these labels for 'suggested_type'):\n{allowed_types}\n\nValidation rules and hints:\n1. Characters:\n   - If context mentions 'played by', 'actor', 'father', 'mother', 'born', or 'died',\n     the entity is almost certainly a 'Character' (even if it also looks like an Organization/Object).\n2. Lore vs Character:\n   - Real-world people (directors, producers, stuntman, etc.) are usually 'Lore' or possibly 'Character'\n     if they exist in-universe. If they are purely production staff and not part of the GoT universe,\n     prefer 'Lore'.\n3. Battles:\n   - Entities that are wars, sieges, sacks, or named conflicts should be 'Battle'.\n4. Objects:\n   - Swords, blades, ships, poisons, crowns, artifacts, etc. should be 'Object'.\n5. Organizations:\n   - Guilds, banks, religious orders, guards, brotherhoods, watches, councils, etc. should be 'Organization'.\n6. Locations:\n   - Castles, cities, regions, islands, rivers, etc. should be 'Location'.\n7. Episodes:\n   - TV episodes (with directors, writers, air dates, runtimes) should be 'Episode'.\n8. Lore:\n   - Use 'Lore' when the entity does not clearly match any category above or is purely meta/real-world.\n9. Heuristic confidence:\n   - You will see a 'current_type' and a 'heuristic_confidence' for each entity.\n   - If 'heuristic_confidence' is 'Low', rely heavily on the text and properties.\n   - You may either CONFIRM the current_type or CORRECT it if evidence is strong.\n\nOutput requirements:\n- Return a JSON object strictly following the given schema (BatchValidationResult).\n- The 'results' list MUST:\n  - Contain one item per input entity.\n  - Be in any order, but each item MUST have an 'id' that matches one of the input entities.\n- For each result:\n  - 'id' MUST be copied exactly from the corresponding input entity.\n  - 'suggested_type' MUST be one of the allowed ontology labels.\n  - 'confidence' MUST be one of: 'High', 'Medium', 'Low'.\n  - 'rationale' MUST be a short explanation.",
    "validator_human": "Analyze the following batch of entities and validate/correct their types.\n\nYou are given a JSON array where each element has:\n- 'id': unique identifier of the node\n- 'current_type': the type assigned by heuristic rules\n- 'heuristic_confidence': 'High', 'Medium', or 'Low'\n- 'properties': flattened infobox key/value pairs\n- 'text_context': truncated node text (if available)\n\nJSON input:\n{input_data}"
  }
}